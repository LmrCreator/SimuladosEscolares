<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulados Escolares | Portugu√™s e Mais</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* =================================================== */
        /* 1. ESTILIZA√á√ÉO GERAL E LAYOUT (VISUAL AGRAD√ÅVEL) */
        /* =================================================== */

        body {
            font-family: 'Poppins', sans-serif;
            line-height: 1.6;
            padding: 40px 20px;
            background-color: #F7F9FC; /* Light Blue/Gray Background */
            color: #333;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background-color: #FFFFFF;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08); /* Sombra mais destacada */
        }

        /* T√≠tulo e Subt√≠tulo */
        h1 {
            font-weight: 700;
            color: #4A90E2; /* Primary Blue */
            border-bottom: 3px solid #4A90E2;
            padding-bottom: 15px;
            margin-bottom: 25px;
        }
        p {
            margin-bottom: 20px;
            color: #555;
        }
        h2 {
            color: #333;
            margin-top: 30px;
            padding-top: 10px;
            border-top: 1px solid #eee;
        }
        h3 {
            color: #4A90E2;
            margin-top: 20px;
            border-bottom: 1px dashed #4A90E2;
            padding-bottom: 5px;
        }


        /* Card de Quest√£o */
        .questao {
            margin-bottom: 30px;
            padding: 20px;
            border-radius: 8px;
            background-color: #FFFFFF;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); 
            transition: transform 0.2s;
        }
        .questao:hover {
            transform: translateY(-2px);
        }

        .pergunta {
            font-weight: 600; 
            margin-bottom: 15px;
            color: #1a1a1a;
            font-size: 1.05em;
        }
        
        /* Estilo para Textarea (Dissertativas) */
        .questao textarea {
            width: 100%;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-family: 'Poppins', sans-serif;
            font-size: 0.95em;
            box-sizing: border-box;
            resize: vertical;
        }

        /* Bot√£o de Corrigir e Novo Simulado */
        .btn-corrigir, .btn-novo {
            padding: 12px 25px;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1.05em;
            font-weight: 600;
            transition: background-color 0.3s, transform 0.1s;
            margin-top: 20px;
            display: block; 
            width: 100%;
            max-width: 350px; 
            margin-left: auto;
            margin-right: auto;
            text-align: center; 
        }
        
        .btn-corrigir {
            background-color: #4A90E2; /* Azul */
        }
        .btn-corrigir:hover {
            background-color: #3A7BBF;
            transform: translateY(-1px);
        }

        .btn-novo {
             background-color: #28a745; /* Verde */
        }
        .btn-novo:hover {
             background-color: #1e7e34;
             transform: translateY(-1px);
        }

        /* Se√ß√£o de Resultado */
        #resultado {
            margin-top: 40px;
            padding: 25px;
            border: 2px solid #4A90E2;
            border-radius: 10px;
            background-color: #EBF5FF; 
            font-size: 1.2em;
            text-align: center;
        }
        .resultado-correto { color: #28a745; font-weight: 700; }
        .resultado-incorreto { color: #dc3545; font-weight: 700; }

        /* Coment√°rios Styling */
        #comentariosContainer { 
            padding: 15px; 
            border: 1px solid #eee; 
            background-color: #fcfcfc; 
            border-radius: 8px;
            max-height: 400px;
            overflow-y: auto;
        }
        .comentario-item { 
            margin-bottom: 15px; 
            padding: 10px; 
            border-left: 5px solid #4A90E2; 
            background-color: #ffffff; 
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
            border-radius: 4px;
        }
        #formComentarios input[type="text"], #formComentarios textarea {
            border: 1px solid #ccc;
            border-radius: 4px;
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            box-sizing: border-box;
        }
        #formComentarios button[type="submit"] {
            background-color: #28a745 !important; /* Bot√£o verde */
            max-width: 200px; /* Largura menor para o bot√£o de enviar */
            margin: 10px auto; /* Centraliza o bot√£o */
        }

        /* =================================================== */
        /* 2. ESTILIZA√á√ÉO DE ABAS */
        /* =================================================== */

        .tabs-container {
            margin-top: 30px;
            border: 1px solid #ddd;
            border-radius: 8px;
            overflow: hidden; 
        }

        .tab-buttons {
            display: flex;
            background-color: #f1f1f1;
            border-bottom: 1px solid #ddd;
        }

        .tab-button {
            background-color: inherit;
            border: none;
            outline: none;
            cursor: pointer;
            padding: 14px 20px;
            transition: 0.3s;
            font-size: 1.0em;
            font-weight: 600;
            color: #4A90E2; 
            flex-grow: 1; 
            text-align: center;
            min-width: 0;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .tab-button:hover {
            background-color: #ddd;
        }

        .tab-button.active {
            background-color: #FFFFFF;
            border-bottom: 3px solid #4A90E2;
            color: #1a1a1a;
        }

        .tab-content {
            padding: 20px;
            border-top: none;
            background-color: #FFFFFF;
            display: none; 
        }

        .tab-content.active {
            display: block; 
        }

        /* Responsividade para bot√µes de abas */
        @media (max-width: 600px) {
            .tab-buttons {
                flex-wrap: wrap; 
            }
            .tab-button {
                flex-basis: 50%; 
                padding: 12px 10px;
            }
        }

                /* Rodap√© */
        footer {
            text-align: center;
            margin-top: 60px; /* Mais espa√ßo acima */
            padding: 25px;
            background-color: #ffffff;
            color: #ecf0f1; /* Cinza claro */
            border-top: 5px solid #2980b9; /* Borda azul */
            /* Removido border-radius para ocupar largura total */
        }
        footer h3, footer h4 {
            margin: 8px 0; /* Mais espa√ßo */
            color: #000000; 
            font-weight: 600;
        }
        footer h5 {
            margin: 5px 0;
            color: #bdc3c7; /* Cinza mais claro */
            font-size: 0.9em; /* Menor */
            font-style: italic;
        }
        footer a {
            color: #0c0d82; /* Azul claro para links */
            text-decoration: none;
            transition: color 0.3s;
        }
        footer a:hover {
            color: #0b0cb5; /* Azul mais claro no hover */
            text-decoration: underline;
        }
    </style>
</head>
<body>

    <div class="container">

        <h1>Simulados Escolares</h1>
        <p>Selecione uma mat√©ria abaixo. O Simulado de Portugu√™s est√° ativo e reformulado com quest√µes dissertativas.</p>

        <div class="tabs-container">
            <div class="tab-buttons">
                <button class="tab-button" onclick="openTab(event, 'portugues')">Portugu√™s</button>
                <button class="tab-button" onclick="openTab(event, 'matematica')">Matem√°tica</button>
                <button class="tab-button" onclick="openTab(event, 'historia')">Hist√≥ria</button>
                <button class="tab-button" onclick="openTab(event, 'geografia')">Geografia</button>
                <button class="tab-button" onclick="openTab(event, 'cienciasn')">Ci√™ncias N.</button>
                <button class="tab-button" onclick="openTab(event, 'cienciass')">Ci√™ncias S.</button>
                <button class="tab-button" onclick="openTab(event, 'ingles')">Ingl√™s</button>
                <button class="tab-button" onclick="openTab(event, 'breve')">Em Breve!</button>
            </div>

            <div id="portugues" class="tab-content">
                <h3>Simulado de L√≠ngua Portuguesa - An√°lise Dissertativa</h3>
                <p>Este simulado √© composto por duas quest√µes dissertativas. Suas respostas ser√£o analisadas (simuladamente) para uma atribui√ß√£o de nota.</p>

                <form id="simuladoForm">
                    Carregando simulado...
                </form>
                
                <div id="resultado">        
                    Aguardando an√°lise...      
                </div>
            </div>

            <div id="matematica" class="tab-content">
                <h3>Simulado de Matem√°tica</h3>
                <div style="padding: 20px; text-align: center; border: 1px dashed #4A90E2; border-radius: 8px;">
                    <p style="font-size: 1.2em; font-weight: 600; color: #dc3545;">No momento sem simulados!</p>
                </div>
            </div>

            <div id="historia" class="tab-content">
                <h3>Simulado de Hist√≥ria</h3>
                <div style="padding: 20px; text-align: center; border: 1px dashed #4A90E2; border-radius: 8px;">
                    <p style="font-size: 1.2em; font-weight: 600; color: #dc3545;">No momento sem simulados!</p>
                </div>
            </div>

            <div id="geografia" class="tab-content">
                <h3>Simulado de Geografia</h3>
                <div style="padding: 20px; text-align: center; border: 1px dashed #4A90E2; border-radius: 8px;">
                    <p style="font-size: 1.2em; font-weight: 600; color: #dc3545;">No momento sem simulados!</p>
                </div>
            </div>

            <div id="cienciasn" class="tab-content">
                <h3>Simulado de Ci√™ncias Naturais</h3>
                <div style="padding: 20px; text-align: center; border: 1px dashed #4A90E2; border-radius: 8px;">
                    <p style="font-size: 1.2em; font-weight: 600; color: #dc3545;">No momento sem simulados!</p>
                </div>
            </div>

            <div id="cienciass" class="tab-content">
                <h3>Simulado de Ci√™ncias Sociais</h3>
                <div style="padding: 20px; text-align: center; border: 1px dashed #4A90E2; border-radius: 8px;">
                    <p style="font-size: 1.2em; font-weight: 600; color: #dc3545;">No momento sem simulados!</p>
                </div>
            </div>

            <div id="ingles" class="tab-content">
                <h3>Simulado de Ingl√™s</h3>
                <div style="padding: 20px; text-align: center; border: 1px dashed #4A90E2; border-radius: 8px;">
                    <p style="font-size: 1.2em; font-weight: 600; color: #dc3545;">No momento sem simulados!</p>
                </div>
            </div>
            
            <div id="breve" class="tab-content">
                <h3>Mais mat√©rias em breve!!</h3>
                <div style="padding: 20px; text-align: center; border: 1px dashed #4A90E2; border-radius: 8px;">
                    <p style="font-size: 1em; font-weight: 400; color: #dc3545;"><strong>No momento est√£o sendo trabalhadas atualiza√ß√µes para aumentar a capacidade e quantidade para conte√∫do e mat√©rias, al√©m de espera para novas provas! Aproveite os simulados que est√£o ativos e bom estudo.</strong></p>
                </div>
            </div>
        </div>
        <div style="margin-top: 40px; border-top: 2px solid #ccc; padding-top: 20px;">
            <h2>üí¨ Sistema de Coment√°rios</h2>
            <p>Deixe seu coment√°rio ou d√∫vida sobre os simulados.</p>

            <form id="formComentarios">
                <input type="text" id="nomeUsuario" placeholder="Seu Nome" required>
                <textarea id="textoComentario" placeholder="Seu Coment√°rio..." required></textarea>
                <button type="submit" class="btn-novo">Enviar Coment√°rio</button>
            </form>

            <hr>

            <h3>Coment√°rios Recentes</h3>
            <div id="comentariosContainer">
                Carregando coment√°rios...
            </div>
        </div>
        <footer>
        <h3><b>Desenvolvido por: Luiz Miguel Rodrigues.</b></h3>
        <h4><b>Turma: 7¬∞B.</b></h4>
        <p><b><a href="https://luizmr.neocities.org/" target="_blank" rel="noopener noreferrer">Outros Sites</a></b></p>
        <h3><em>Fontes:</em></h3>
        <p><em><a href="https://pib.socioambiental.org/pt/Povo:Kaiabi" target="_blank" rel="noopener noreferrer">Socioambiental ‚Äì Kaiabi/Kawaiwete</a></em></p>
        <p><em><a href="https://site-antigo.socioambiental.org/pt-br/noticias-socioambientais/kawaiwete-lutam-para-manter-seus-rocas-tradicionais" target="_blank" rel="noopener noreferrer">Not√≠cias sobre ro√ßas tradicionais dos Kawaiwete</a></em></p>
        <p><em><a href="https://pt.wikipedia.org/wiki/Caiabis" target="_blank" rel="noopener noreferrer">Wikipedia ‚Äì Caiabis</a></em></p>
        <p><em><a href="https://www.sil.org/system/files/reapdata/45/72/24/4572241492590646018462695639676606922/kyz_Dicionario_Kayabi_Weiss_2005.pdf" target="_blank" rel="noopener noreferrer">Dicion√°rio Kayabi (Weiss, 2005)</a></em></p>
    </footer>

    </div>
    
    <script>
        // =========================================================================
        // 1. FUN√á√ÉO DE CONTROLE DE ABAS (SEM ALTERA√á√ïES, J√Å FUNCIONA)
        // =========================================================================
        function openTab(evt, tabName) {
            var i, tabcontent, tablinks;
            
            // Oculta todo o conte√∫do das abas
            tabcontent = document.getElementsByClassName("tab-content");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
            }
            
            // Remove a classe 'active' de todos os bot√µes
            tablinks = document.getElementsByClassName("tab-button");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].className = tablinks[i].className.replace(" active", "");
            }
            
            // Exibe o conte√∫do da aba atual e adiciona a classe 'active' ao bot√£o
            document.getElementById(tabName).style.display = "block";
            evt.currentTarget.className += " active";
        }

        // =========================================================================
        // 2. FUN√á√ïES DO SIMULADO DE PORTUGU√äS (DISSERTATIVAS)
        // =========================================================================
        
        function montarSimulado() {
            const form = document.getElementById('simuladoForm');
            
            form.innerHTML = `
                <div class="questao" id="q-autoavaliacao">
                    <div class="pergunta"><strong>Quest√£o 1 (Autoavalia√ß√£o de Participa√ß√£o):</strong> Fa√ßa uma autoavalia√ß√£o sincera sobre a sua participa√ß√£o e engajamento nas aulas de Portugu√™s durante o ano letivo. [Indique uma nota (de 0 a 10) no texto para que ela seja considerada para sua nota final desta quest√£o].</div>
                    <textarea id="resposta-autoavaliacao" name="resposta-autoavaliacao" rows="8" placeholder="Escreva sua autoavalia√ß√£o e justifique a nota (ex: 'Minha nota √© 8.5, porque...')."></textarea>
                </div>
                
                <div class="questao" id="q-conteudo">
                    <div class="pergunta"><strong>Quest√£o 2 (An√°lise de Conte√∫do):</strong> Escolha APENAS UM dos seguintes conte√∫dos para dissertar: 'Relato Hist√≥rico e Viagem de Saint-Hilaire', 'Influ√™ncias Ind√≠genas na L√≠ngua Portuguesa' ou 'Slam - Poesia Falada'. Seu texto deve come√ßar *indicando o tema escolhido* e, em seguida, desenvolver a an√°lise.</div>
                    <textarea id="resposta-conteudo" name="resposta-conteudo" rows="12" placeholder="Exemplo: 'Tema escolhido: Slam - Poesia Falada. O Slam √© importante pois...'"></textarea>
                </div>
                
                <button type="button" class="btn-corrigir" onclick="corrigirSimulado()">Analisar e Corrigir</button>
            `;
            
             // Limpa o resultado anterior
             document.getElementById('resultado').innerHTML = 'Aguardando an√°lise...';
        }

        function corrigirSimulado() {
            const resposta1 = document.getElementById('resposta-autoavaliacao').value.trim();
            const resposta2 = document.getElementById('resposta-conteudo').value.trim();
            const resultadoDiv = document.getElementById('resultado');
            const form = document.getElementById('simuladoForm');

            // 1. Valida√ß√£o
            if (!resposta1 || !resposta2) {
                resultadoDiv.innerHTML = '<p class="resultado-incorreto">Por favor, responda a ambas as quest√µes para a an√°lise.</p>';
                return;
            }
            
            // --- AN√ÅLISE QUEST√ÉO 1 (AUTOAVALIA√á√ÉO) ---
            // Pega o primeiro n√∫mero que se pare√ßa com uma nota (0-10)
            const notaCandidatoMatch = resposta1.match(/(\d{1,2}(?:[.,]\d)?)/);
            let notaAutoAvaliacao = notaCandidatoMatch ? parseFloat(notaCandidatoMatch[1].replace(',', '.')) : 0;
            if (notaAutoAvaliacao > 10) notaAutoAvaliacao = 10;
            
            // REGRA: A nota da Q1 √â a nota de autoavalia√ß√£o do aluno
            let notaQ1 = notaAutoAvaliacao; 
            let analiseQ1 = `‚úÖ Autoavalia√ß√£o Aceita: A nota de **${notaQ1.toFixed(1)}/10** foi registrada, conforme sua justificativa sobre a participa√ß√£o no ano.`;
            
            if (notaQ1 === 0) {
                 analiseQ1 = `‚ö†Ô∏è Nota N√£o Encontrada: Por favor, inclua explicitamente a nota (0-10) em sua justificativa. Nota de Q1 mantida em ${notaQ1.toFixed(1)}/10.`;
            } else if (notaQ1 >= 9.5 && resposta1.length < 100) {
                 // Nova regra de feedback qualitativo para notas altas sem justificativa detalhada
                 analiseQ1 += ` **(Observa√ß√£o da Banca):** A nota autoavaliada √© alta, mas a justificativa √© breve. Para notas acima de 9.5, espera-se uma justificativa mais detalhada sobre o impacto das suas a√ß√µes.`;
            }

            
            // --- AN√ÅLISE QUEST√ÉO 2 (CONTE√öDO) ---
            const temas = ['Relato Hist√≥rico', 'Influ√™ncias Ind√≠genas', 'Slam'];
            
            let temaIdentificado = temas.find(t => resposta2.toLowerCase().includes(t.toLowerCase()));
            
            const comprimentoMinimoQ2 = 150; // M√≠nimo para ser considerado disserta√ß√£o
            const comprimentoQ2 = resposta2.length;
            let notaQ2;
            let analiseQ2;

            // --- NOVO CRIT√âRIO DE AVALIA√á√ÉO QUALITATIVA E INDEPENDENTE ---

            if (!temaIdentificado) {
                notaQ2 = 3.0; // N√£o seguiu a instru√ß√£o principal de escolher o tema.
                analiseQ2 = `‚ùå Crit√©rio N√£o Atendido: N√£o foi poss√≠vel identificar no in√≠cio do texto qual dos temas (${temas.join(', ')}) foi escolhido. Nota penalizada por falta de clareza na introdu√ß√£o.`;
            } else if (comprimentoQ2 < comprimentoMinimoQ2) {
                notaQ2 = 6.0; // Resposta breve, sem profundidade.
                analiseQ2 = `‚ö†Ô∏è Resposta Insuficiente: O tema **${temaIdentificado}** foi identificado, mas a resposta √© muito breve (${comprimentoQ2} caracteres). A disserta√ß√£o precisa de mais profundidade na an√°lise do conte√∫do. Nota m√°xima limitada a 6.0 pela falta de desenvolvimento.`;
            } else {
                // Simula nota alta para respostas que cumprem os crit√©rios formais e de profundidade.
                // Esta nota √© FIXA e INDEPENDENTE da Q1.
                notaQ2 = 9.0; 
                analiseQ2 = `‚úÖ An√°lise Qualitativa (Simulada): O tema **${temaIdentificado}** foi escolhido e a disserta√ß√£o demonstrou clareza e bom dom√≠nio do assunto. A estrutura atendeu ao crit√©rio de profundidade para a atribui√ß√£o de nota alta.`;
            }
            
            // --- C√ÅLCULO DA NOTA FINAL ---
            const notaFinal = ((notaQ1 + notaQ2) / 2).toFixed(1);

            // Desabilitar textareas ap√≥s a corre√ß√£o/an√°lise
            document.getElementById('resposta-autoavaliacao').disabled = true;
            document.getElementById('resposta-conteudo').disabled = true;
            
            // Exibe o resultado final com a nota atribu√≠da
            resultadoDiv.innerHTML = `
                <p><strong>üìù Resultado da An√°lise Dissertativa:</strong></p>
                <div style="text-align: left; font-size: 1em; padding: 10px; border: 1px dashed #4A90E2; border-radius: 6px; margin-bottom: 10px;">
                    <p><strong>Quest√£o 1 (Autoavalia√ß√£o):</strong> ${analiseQ1}</p>
                    <p><strong>Nota Q1:</strong> <span class="${notaQ1 >= 6.0 ? 'resultado-correto' : 'resultado-incorreto'}">${notaQ1.toFixed(1)}/10</span></p>
                </div>
                <div style="text-align: left; font-size: 1em; padding: 10px; border: 1px dashed #4A90E2; border-radius: 6px;">
                    <p><strong>Quest√£o 2 (Conte√∫do):</strong> ${analiseQ2}</p>
                    <p><strong>Nota Q2:</strong> <span class="${notaQ2 >= 6.0 ? 'resultado-correto' : 'resultado-incorreto'}">${notaQ2.toFixed(1)}/10</span></p>
                </div>
                <p style="margin-top: 20px;">üéØ **NOTA FINAL GERAL:** <span class="${notaFinal >= 6.0 ? 'resultado-correto' : 'resultado-incorreto'}" style="font-size: 1.5em;">${notaFinal}/10</span></p>
                <button class="btn-novo" onclick="window.location.reload()">üîÅ Novo Simulado Dissertativo</button>
            `;

            // Remove o bot√£o de corrigir antigo
            const oldButton = form.querySelector('.btn-corrigir');
            if(oldButton) oldButton.remove();
        }
        
        // =========================================================================
        // 3. CONFIGURA√á√ÉO E FUN√á√ïES DO SISTEMA DE COMENT√ÅRIOS (SEM ALTERA√á√ïES)
        // =========================================================================
        
        // URLs do Google Forms para ENVIAR e Sheets para LER
        const FORM_URL = 'https://docs.google.com/forms/d/e/1FAIpQLSeeP92-M7f6PM2vm62rGPPzf0YASPcQLmPMrPzfavlKHI-D6A/formResponse'; 
        const ID_NOME = 'entry.1623291887'; 
        const ID_COMENTARIO = 'entry.1834481104'; 
        const SHEET_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vQGMRJPZdsup9DMi9dFoaad2VhyvOq9oAelRneo7NDwl7NShoDjsPEeeqA-sE21fYuczhVE-xVVuTOn/pub?gid=711566&single=true&output=csv';

        document.addEventListener('DOMContentLoaded', () => {
            const formComentarios = document.getElementById('formComentarios');
            if (formComentarios) {
                formComentarios.addEventListener('submit', function(event) {
                    event.preventDefault(); 
                
                    const nome = document.getElementById('nomeUsuario').value;
                    const comentario = document.getElementById('textoComentario').value;
                
                    if (!nome || !comentario) {
                        alert("Por favor, preencha seu nome e o coment√°rio.");
                        return;
                    }
            
                    const formData = new FormData();
                    formData.append(ID_NOME, nome);
                    formData.append(ID_COMENTARIO, comentario);
            
                    document.getElementById('comentariosContainer').innerHTML = 'Enviando...';
            
                    fetch(FORM_URL, { method: 'POST', body: formData, mode: 'no-cors' })
                    .then(() => {
                        alert("Coment√°rio enviado! Aguarde um momento para que ele apare√ßa na lista.");
                        document.getElementById('nomeUsuario').value = '';
                        document.getElementById('textoComentario').value = '';
                        setTimeout(carregarComentarios, 2500); 
                    })
                    .catch(error => {
                        alert('Sucesso presumido! Mas se o coment√°rio n√£o aparecer, pode ser um erro de rede ou URL.');
                        console.error('Erro de fetch no modo no-cors (Pode ser erro de URL ou rede)', error);
                        setTimeout(carregarComentarios, 2500); 
                    });
                });
            }
        });
        
        function carregarComentarios() {
            const container = document.getElementById('comentariosContainer');
            if (!container) return; 
            
            container.innerHTML = 'Carregando coment√°rios...';
        
            fetch(SHEET_URL)
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`Erro HTTP! Status: ${response.status}`);
                    }
                    return response.text();
                })
                .then(csvText => {
                    container.innerHTML = ''; 
                    
                    const linhas = csvText.split(/\r?\n/).slice(1).filter(line => line.trim() !== ''); 
                    
                    linhas.reverse().forEach(linha => { 
                        // Split robusto para CSV
                        const colunas = linha.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/).map(col => col.trim().replace(/"/g, ''));
                        
                        if (colunas.length >= 3) {
                            const dataHora = colunas[0]; 
                            const nome = colunas[1]; 
                            const comentario = colunas[2]; 
        
                            const divComentario = document.createElement('div');
                            divComentario.className = 'comentario-item';
                            divComentario.innerHTML = `
                                <p><strong>${nome}</strong> <em>(${dataHora.split(' ')[0]})</em>:</p>
                                <p style="margin-top: 5px;">${comentario}</p>
                            `;
                            container.appendChild(divComentario);
                        }
                    });
        
                    if (linhas.length === 0) {
                        container.innerHTML = 'Nenhum coment√°rio ainda. Seja o primeiro!';
                    }
                })
                .catch(error => {
                    container.innerHTML = 'Erro ao carregar coment√°rios. Verifique a URL do Google Sheets e as permiss√µes.';
                    console.error("Erro ao buscar CSV:", error);
                });
        }
        
        // 5. INICIALIZA√á√ÉO
        document.addEventListener('DOMContentLoaded', () => {
            montarSimulado();
            
            // Abre a primeira aba (Portugu√™s) por padr√£o
            document.getElementById('portugues').style.display = 'block';
            document.querySelector('.tab-button').className += ' active';

            carregarComentarios();
        });
    </script>
</body>
</html>


